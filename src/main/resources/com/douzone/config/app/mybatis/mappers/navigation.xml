<?xml version="1.0" encoding="UTF-8" ?> 

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="navigation">
	<select id="getCompanyList" resultType="companyvo">
		select distinct b.comp_seq, b.group_seq, b.comp_name, b.lang_code
		from t_co_comp a, t_co_comp_multi b
		where a.group_seq = b.group_seq
		and b.lang_code = 'kr'
		and a.use_yn = 'Y'
		and b.use_yn = 'Y'
		order by b.comp_seq + 0;
	</select>
	
	<select id="getDeptList" resultType="departmentsvo">
	    select a.no as no, a.name as name, a.g_no as gNo, a.o_no as oNo, a.depth as depth , a.company_no as companyNo, a.parents 
	      from departments a, company b 
	     where a.company_no = b.no
<!-- 	       and b.no = ${value} -->
	  order by a.g_no asc, a.o_no asc
	</select>

	<!-- 더미데이터  -->
	<select id="getCount" resultType="int">
		select count(*) from departments
	</select>
	
	<select id="getCountByPno" resultType="int" parameterType="int">
		select count(*) from departments where parents = #{parents}
	</select>
	
	<select id="getNameByPno" resultType="string" parameterType="int">
		select name from departments where no = #{no}
	</select>
	
	<update id="autoSet" parameterType="int">
		alter table departments auto_increment=#{num};
	</update>
	
	<select id="getDeptByPno" parameterType="int" resultType="departmentsvo">
		select distinct a.no as no, name, g_no as gNo, o_no as oNo, depth, b.company_no as companyNo, p_no as parents
		from departments a, dept_com b
		where a.no = b.departments_no
		and to_date = '9999-01-01'
		and a.p_no = #{pNo};
	</select>
</mapper>